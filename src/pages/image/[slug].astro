---
import BaseImage from "../../components/BaseImage.astro";
import BaseIndex from "../../layouts/BaseIndex.astro";
import { getProcessedImages } from "../../utils/processedImages";

export async function getStaticPaths() {
	const images = await getProcessedImages();

	return images.map((img) => ({
		params: { slug: img.slug },
		props: {
			date: img.date,
			slug: img.slug,
			src: img.original.src,
			width: img.original.attributes.width as number,
			height: img.original.attributes.height as number,
			thumbnailSrc: img.thumbnail.src,
			alt: `Image ${img.slug}`,
		},
	}));
}

const { slug } = Astro.params;
const props = Astro.props;
---

<BaseIndex
	title={`Image ${slug} - Galerie d'Ayaan`}
	description="Ayaan Zaidi's personal image feed. Mild obsession with aircrafts and shiny things. Mostly shot on a mobile camera."
	previewImage={props.thumbnailSrc}
>
	<BaseImage {...props} />
</BaseIndex>
